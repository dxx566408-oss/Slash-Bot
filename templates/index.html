<div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content bg-dark border-danger">
            <div class="modal-header border-danger">
                <h5 class="modal-title">تعديل رصيد مراد</h5>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editUid">
                <label>الرصيد الجديد:</label>
                <input type="number" id="newMrad" class="form-control bg-secondary text-white border-0">
            </div>
            <div class="modal-footer border-danger">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                <button type="button" class="btn btn-danger" onclick="saveChange()">حفظ التغييرات</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
function openEdit(uid, currentMrad) {
    document.getElementById('editUid').value = uid;
    document.getElementById('newMrad').value = currentMrad;
    new bootstrap.Modal(document.getElementById('editModal')).show();
}

function saveChange() {
    const uid = document.getElementById('editUid').value;
    const mrad = document.getElementById('newMrad').value;

    fetch('/update_balance', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({uid: uid, mrad: mrad})
    }).then(res => {
        if(res.ok) location.reload();
    });
}
</script>
